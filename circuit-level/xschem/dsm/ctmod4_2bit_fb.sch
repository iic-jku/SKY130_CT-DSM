v {xschem version=3.4.0 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
N 570 -1160 570 -1110 {
lab=vcmi}
N 570 -1110 640 -1110 {
lab=vcmi}
N 640 -1110 640 -1080 {
lab=vcmi}
N 640 -1110 710 -1110 {
lab=vcmi}
N 710 -1160 710 -1110 {
lab=vcmi}
N 640 -1020 640 -990 {
lab=GND}
N 570 -1330 570 -1310 {
lab=vip}
N 550 -1330 570 -1330 {
lab=vip}
N 710 -1330 710 -1310 {
lab=vin}
N 710 -1330 730 -1330 {
lab=vin}
N 610 -1300 640 -1300 {
lab=vid}
N 640 -1300 670 -1300 {
lab=vid}
N 640 -1240 640 -1230 {
lab=GND}
N 1270 -1280 1270 -1250 {
lab=vcm}
N 1270 -1190 1270 -1160 {
lab=GND}
N 1650 -1300 1690 -1300 {
lab=x4p}
N 1650 -1260 1690 -1260 {
lab=x4n}
N 1810 -1330 1870 -1330 {
lab=D2}
N 1730 -1150 1730 -1110 {
lab=GND}
N 1650 -1160 1690 -1160 {
lab=vref_p}
N 1650 -1200 1690 -1200 {
lab=vcm}
N 2190 -1250 2190 -1210 {
lab=#net1}
N 2110 -1300 2150 -1300 {
lab=x4p}
N 2110 -1260 2150 -1260 {
lab=x4n}
N 2270 -1330 2330 -1330 {
lab=D1}
N 2190 -1150 2190 -1110 {
lab=GND}
N 2110 -1160 2150 -1160 {
lab=vcm}
N 2110 -1200 2150 -1200 {
lab=vcm}
N 2660 -1250 2660 -1210 {
lab=#net2}
N 2580 -1300 2620 -1300 {
lab=x4p}
N 2580 -1260 2620 -1260 {
lab=x4n}
N 2740 -1330 2800 -1330 {
lab=D0}
N 2660 -1150 2660 -1110 {
lab=GND}
N 2580 -1160 2620 -1160 {
lab=vcm}
N 2580 -1200 2620 -1200 {
lab=vref_p}
N 1730 -1330 1730 -1310 {
lab=#net3}
N 1730 -1250 1730 -1210 {
lab=#net4}
N 2190 -1330 2190 -1310 {
lab=#net5}
N 2660 -1330 2660 -1310 {
lab=#net6}
N 1730 -1330 1750 -1330 {
lab=#net3}
N 2190 -1330 2210 -1330 {
lab=#net5}
N 2660 -1330 2680 -1330 {
lab=#net6}
N 80 -500 80 -480 {
lab=GND}
N 80 -500 100 -500 {
lab=GND}
N 140 -490 140 -460 {
lab=vcm}
N 260 -490 260 -460 {
lab=vcm}
N 260 -580 260 -550 {
lab=x1n}
N 140 -580 140 -550 {
lab=x1p}
N 2460 -1330 2500 -1330 {
lab=A1}
N 350 -500 350 -480 {
lab=GND}
N 350 -500 370 -500 {
lab=GND}
N 410 -490 410 -460 {
lab=vcm}
N 530 -490 530 -460 {
lab=vcm}
N 530 -580 530 -550 {
lab=x1n}
N 410 -580 410 -550 {
lab=x1p}
N 2930 -1330 2970 -1330 {
lab=A0}
N 630 -500 630 -480 {
lab=GND}
N 630 -500 650 -500 {
lab=GND}
N 690 -490 690 -460 {
lab=vcm}
N 810 -490 810 -460 {
lab=vcm}
N 810 -580 810 -550 {
lab=x1n}
N 690 -580 690 -550 {
lab=x1p}
N 2000 -1330 2040 -1330 {
lab=A2}
N 350 -540 370 -540 {
lab=A1}
N 80 -540 100 -540 {
lab=A2}
N 1040 -1180 1040 -1150 {
lab=GND}
N 1040 -1270 1040 -1240 {
lab=vclk}
N 1040 -1260 1060 -1260 {
lab=vclk}
N 1120 -1260 1140 -1260 {
lab=CLK}
N 1360 -1290 1360 -1250 {
lab=vref_p}
N 1360 -1190 1360 -1170 {
lab=vcm}
N 2110 -1200 2110 -1160 {
lab=vcm}
N 570 -1250 570 -1220 {
lab=#net7}
N 710 -1250 710 -1160 {
lab=vcmi}
N 630 -540 650 -540 {
lab=A0}
N 140 -460 140 -450 {
lab=vcm}
N 140 -450 810 -450 {
lab=vcm}
N 140 -450 140 -440 {
lab=vcm}
N 260 -460 260 -450 {
lab=vcm}
N 410 -460 410 -450 {
lab=vcm}
N 530 -460 530 -450 {
lab=vcm}
N 690 -460 690 -450 {
lab=vcm}
N 810 -460 810 -450 {
lab=vcm}
N 530 -670 530 -580 {
lab=x1n}
N 410 -670 410 -580 {
lab=x1p}
N 260 -610 260 -580 {
lab=x1n}
N 260 -610 530 -610 {
lab=x1n}
N 140 -630 140 -580 {
lab=x1p}
N 140 -630 410 -630 {
lab=x1p}
N 690 -590 690 -580 {
lab=x1p}
N 410 -590 690 -590 {
lab=x1p}
N 810 -600 810 -580 {
lab=x1n}
N 810 -630 810 -600 {
lab=x1n}
N 530 -630 810 -630 {
lab=x1n}
N 410 -670 450 -670 {
lab=x1p}
N 490 -670 530 -670 {
lab=x1n}
N 880 -500 880 -480 {
lab=GND}
N 880 -500 900 -500 {
lab=GND}
N 940 -490 940 -460 {
lab=vcm}
N 1060 -490 1060 -460 {
lab=vcm}
N 1060 -580 1060 -550 {
lab=x2n}
N 940 -580 940 -550 {
lab=x2p}
N 1150 -500 1150 -480 {
lab=GND}
N 1150 -500 1170 -500 {
lab=GND}
N 1210 -490 1210 -460 {
lab=vcm}
N 1330 -490 1330 -460 {
lab=vcm}
N 1330 -580 1330 -550 {
lab=x2n}
N 1210 -580 1210 -550 {
lab=x2p}
N 1430 -500 1430 -480 {
lab=GND}
N 1430 -500 1450 -500 {
lab=GND}
N 1490 -490 1490 -460 {
lab=vcm}
N 1610 -490 1610 -460 {
lab=vcm}
N 1610 -580 1610 -550 {
lab=x2n}
N 1490 -580 1490 -550 {
lab=x2p}
N 1150 -540 1170 -540 {
lab=A1}
N 880 -540 900 -540 {
lab=A2}
N 1430 -540 1450 -540 {
lab=A0}
N 940 -460 940 -450 {
lab=vcm}
N 940 -450 1610 -450 {
lab=vcm}
N 940 -450 940 -440 {
lab=vcm}
N 1060 -460 1060 -450 {
lab=vcm}
N 1210 -460 1210 -450 {
lab=vcm}
N 1330 -460 1330 -450 {
lab=vcm}
N 1490 -460 1490 -450 {
lab=vcm}
N 1610 -460 1610 -450 {
lab=vcm}
N 1330 -670 1330 -580 {
lab=x2n}
N 1210 -670 1210 -580 {
lab=x2p}
N 1060 -610 1060 -580 {
lab=x2n}
N 1060 -610 1330 -610 {
lab=x2n}
N 940 -630 940 -580 {
lab=x2p}
N 940 -630 1210 -630 {
lab=x2p}
N 1490 -590 1490 -580 {
lab=x2p}
N 1210 -590 1490 -590 {
lab=x2p}
N 1610 -600 1610 -580 {
lab=x2n}
N 1610 -630 1610 -600 {
lab=x2n}
N 1330 -630 1610 -630 {
lab=x2n}
N 1210 -670 1250 -670 {
lab=x2p}
N 1290 -670 1330 -670 {
lab=x2n}
N 1720 -500 1720 -480 {
lab=GND}
N 1720 -500 1740 -500 {
lab=GND}
N 1780 -490 1780 -460 {
lab=vcm}
N 1900 -490 1900 -460 {
lab=vcm}
N 1900 -580 1900 -550 {
lab=x3n}
N 1780 -580 1780 -550 {
lab=x3p}
N 1990 -500 1990 -480 {
lab=GND}
N 1990 -500 2010 -500 {
lab=GND}
N 2050 -490 2050 -460 {
lab=vcm}
N 2170 -490 2170 -460 {
lab=vcm}
N 2170 -580 2170 -550 {
lab=x3n}
N 2050 -580 2050 -550 {
lab=x3p}
N 2270 -500 2270 -480 {
lab=GND}
N 2270 -500 2290 -500 {
lab=GND}
N 2330 -490 2330 -460 {
lab=vcm}
N 2450 -490 2450 -460 {
lab=vcm}
N 2450 -580 2450 -550 {
lab=x3n}
N 2330 -580 2330 -550 {
lab=x3p}
N 1990 -540 2010 -540 {
lab=A1}
N 1720 -540 1740 -540 {
lab=A2}
N 2270 -540 2290 -540 {
lab=A0}
N 1780 -460 1780 -450 {
lab=vcm}
N 1780 -450 2450 -450 {
lab=vcm}
N 1780 -450 1780 -440 {
lab=vcm}
N 1900 -460 1900 -450 {
lab=vcm}
N 2050 -460 2050 -450 {
lab=vcm}
N 2170 -460 2170 -450 {
lab=vcm}
N 2330 -460 2330 -450 {
lab=vcm}
N 2450 -460 2450 -450 {
lab=vcm}
N 2170 -670 2170 -580 {
lab=x3n}
N 2050 -670 2050 -580 {
lab=x3p}
N 1900 -610 1900 -580 {
lab=x3n}
N 1900 -610 2170 -610 {
lab=x3n}
N 1780 -630 1780 -580 {
lab=x3p}
N 1780 -630 2050 -630 {
lab=x3p}
N 2330 -590 2330 -580 {
lab=x3p}
N 2050 -590 2330 -590 {
lab=x3p}
N 2450 -600 2450 -580 {
lab=x3n}
N 2450 -630 2450 -600 {
lab=x3n}
N 2170 -630 2450 -630 {
lab=x3n}
N 2050 -670 2090 -670 {
lab=x3p}
N 2130 -670 2170 -670 {
lab=x3n}
N 2560 -500 2560 -480 {
lab=GND}
N 2560 -500 2580 -500 {
lab=GND}
N 2620 -490 2620 -460 {
lab=vcm}
N 2740 -490 2740 -460 {
lab=vcm}
N 2740 -580 2740 -550 {
lab=x4n}
N 2620 -580 2620 -550 {
lab=x4p}
N 2830 -500 2830 -480 {
lab=GND}
N 2830 -500 2850 -500 {
lab=GND}
N 2890 -490 2890 -460 {
lab=vcm}
N 3010 -490 3010 -460 {
lab=vcm}
N 3010 -580 3010 -550 {
lab=x4n}
N 2890 -580 2890 -550 {
lab=x4p}
N 3110 -500 3110 -480 {
lab=GND}
N 3110 -500 3130 -500 {
lab=GND}
N 3170 -490 3170 -460 {
lab=vcm}
N 3290 -490 3290 -460 {
lab=vcm}
N 3290 -580 3290 -550 {
lab=x4n}
N 3170 -580 3170 -550 {
lab=x4p}
N 2830 -540 2850 -540 {
lab=A1}
N 2560 -540 2580 -540 {
lab=A2}
N 3110 -540 3130 -540 {
lab=A0}
N 2620 -460 2620 -450 {
lab=vcm}
N 2620 -450 3290 -450 {
lab=vcm}
N 2620 -450 2620 -440 {
lab=vcm}
N 2740 -460 2740 -450 {
lab=vcm}
N 2890 -460 2890 -450 {
lab=vcm}
N 3010 -460 3010 -450 {
lab=vcm}
N 3170 -460 3170 -450 {
lab=vcm}
N 3290 -460 3290 -450 {
lab=vcm}
N 3010 -670 3010 -580 {
lab=x4n}
N 2890 -670 2890 -580 {
lab=x4p}
N 2740 -610 2740 -580 {
lab=x4n}
N 2740 -610 3010 -610 {
lab=x4n}
N 2620 -630 2620 -580 {
lab=x4p}
N 2620 -630 2890 -630 {
lab=x4p}
N 3170 -590 3170 -580 {
lab=x4p}
N 2890 -590 3170 -590 {
lab=x4p}
N 3290 -600 3290 -580 {
lab=x4n}
N 3290 -630 3290 -600 {
lab=x4n}
N 3010 -630 3290 -630 {
lab=x4n}
N 2890 -670 2930 -670 {
lab=x4p}
N 2970 -670 3010 -670 {
lab=x4n}
N 220 -810 290 -810 {
lab=vip}
N 220 -850 290 -850 {
lab=vcmi}
N 220 -890 290 -890 {
lab=vin}
N 540 -820 540 -810 {
lab=x1n}
N 540 -890 540 -880 {
lab=x1p}
N 890 -810 960 -810 {
lab=x1p}
N 890 -890 960 -890 {
lab=x1n}
N 1340 -820 1340 -810 {
lab=x2n}
N 1340 -890 1340 -880 {
lab=x2p}
N 540 -810 580 -810 {
lab=x1n}
N 810 -810 890 -890 {
lab=x1n}
N 810 -890 890 -810 {
lab=x1p}
N 540 -890 580 -890 {
lab=x1p}
N 1730 -810 1800 -810 {
lab=x2p}
N 1730 -890 1800 -890 {
lab=x2n}
N 2180 -820 2180 -810 {
lab=x3n}
N 2180 -890 2180 -880 {
lab=x3p}
N 1340 -810 1380 -810 {
lab=x2n}
N 1650 -810 1730 -890 {
lab=x2n}
N 1650 -890 1730 -810 {
lab=x2p}
N 1340 -890 1380 -890 {
lab=x2p}
N 2570 -810 2640 -810 {
lab=x3p}
N 2570 -890 2640 -890 {
lab=x3n}
N 3020 -820 3020 -810 {
lab=x4n}
N 3020 -890 3020 -880 {
lab=x4p}
N 2180 -810 2220 -810 {
lab=x3n}
N 2490 -810 2570 -890 {
lab=x3n}
N 2490 -890 2570 -810 {
lab=x3p}
N 2180 -890 2220 -890 {
lab=x3p}
N 3020 -810 3110 -810 {
lab=x4n}
N 3110 -830 3110 -810 {
lab=x4n}
N 3020 -890 3110 -890 {
lab=x4p}
N 3110 -890 3110 -870 {
lab=x4p}
N 2220 -890 2490 -890 {
lab=x3p}
N 2220 -810 2490 -810 {
lab=x3n}
N 2640 -890 2770 -890 {
lab=x3n}
N 2640 -810 2770 -810 {
lab=x3p}
N 580 -890 810 -890 {
lab=x1p}
N 580 -810 810 -810 {
lab=x1n}
N 960 -890 1090 -890 {
lab=x1n}
N 960 -810 1090 -810 {
lab=x1p}
N 1380 -890 1650 -890 {
lab=x2p}
N 1380 -810 1650 -810 {
lab=x2n}
N 1800 -890 1930 -890 {
lab=x2n}
N 1800 -810 1930 -810 {
lab=x2p}
N 1900 -1330 1940 -1330 {
lab=Q2}
N 2360 -1330 2400 -1330 {
lab=Q1}
N 2830 -1330 2870 -1330 {
lab=Q0}
N 410 -890 410 -870 {
lab=x1p}
N 410 -950 430 -950 {
lab=x1p}
N 430 -950 430 -890 {
lab=x1p}
N 430 -890 540 -890 {
lab=x1p}
N 410 -830 410 -810 {
lab=x1n}
N 410 -750 430 -750 {
lab=x1n}
N 430 -810 430 -750 {
lab=x1n}
N 430 -810 540 -810 {
lab=x1n}
N 450 -890 450 -730 {
lab=x1p}
N 490 -810 490 -740 {
lab=x1n}
N 490 -740 490 -730 {
lab=x1n}
N 1210 -890 1210 -870 {
lab=x2p}
N 1210 -950 1230 -950 {
lab=x2p}
N 1230 -950 1230 -890 {
lab=x2p}
N 1230 -890 1340 -890 {
lab=x2p}
N 1210 -830 1210 -810 {
lab=x2n}
N 1210 -750 1230 -750 {
lab=x2n}
N 1230 -810 1230 -750 {
lab=x2n}
N 1230 -810 1340 -810 {
lab=x2n}
N 1250 -890 1250 -730 {
lab=x2p}
N 1290 -810 1290 -730 {
lab=x2n}
N 2050 -890 2050 -870 {
lab=x3p}
N 2050 -950 2070 -950 {
lab=x3p}
N 2070 -950 2070 -890 {
lab=x3p}
N 2070 -890 2180 -890 {
lab=x3p}
N 2050 -830 2050 -810 {
lab=x3n}
N 2050 -750 2070 -750 {
lab=x3n}
N 2070 -810 2070 -750 {
lab=x3n}
N 2070 -810 2180 -810 {
lab=x3n}
N 2090 -890 2090 -730 {
lab=x3p}
N 2130 -810 2130 -730 {
lab=x3n}
N 2890 -890 2890 -870 {
lab=x4p}
N 2890 -950 2910 -950 {
lab=x4p}
N 2910 -950 2910 -890 {
lab=x4p}
N 2910 -890 3020 -890 {
lab=x4p}
N 2890 -830 2890 -810 {
lab=x4n}
N 2890 -750 2910 -750 {
lab=x4n}
N 2910 -810 2910 -750 {
lab=x4n}
N 2910 -810 3020 -810 {
lab=x4n}
N 2930 -890 2930 -730 {
lab=x4p}
N 2970 -810 2970 -730 {
lab=x4n}
N 610 -1260 670 -1260 {
lab=GND}
N 640 -1260 640 -1240 {
lab=GND}
N 960 -1300 960 -1280 {
lab=vid}
N 960 -1220 960 -1200 {
lab=GND}
N 840 -1270 840 -1240 {
lab=vin_p}
N 840 -1270 920 -1270 {
lab=vin_p}
N 920 -1230 920 -1210 {
lab=GND}
N 920 -1210 960 -1210 {
lab=GND}
N 840 -1180 840 -1150 {
lab=vin_n}
N 840 -1290 840 -1270 {
lab=vin_p}
N 100 -540 200 -540 {
lab=A2}
N 200 -540 200 -500 {
lab=A2}
N 200 -500 220 -500 {
lab=A2}
N 220 -540 230 -540 {
lab=GND}
N 230 -540 230 -480 {
lab=GND}
N 200 -480 230 -480 {
lab=GND}
N 370 -540 470 -540 {
lab=A1}
N 470 -540 470 -500 {
lab=A1}
N 470 -500 490 -500 {
lab=A1}
N 490 -540 500 -540 {
lab=GND}
N 500 -540 500 -480 {
lab=GND}
N 470 -480 500 -480 {
lab=GND}
N 650 -540 750 -540 {
lab=A0}
N 750 -540 750 -500 {
lab=A0}
N 750 -500 770 -500 {
lab=A0}
N 770 -540 780 -540 {
lab=GND}
N 780 -540 780 -480 {
lab=GND}
N 750 -480 780 -480 {
lab=GND}
N 900 -540 1000 -540 {
lab=A2}
N 1000 -540 1000 -500 {
lab=A2}
N 1000 -500 1020 -500 {
lab=A2}
N 1020 -540 1030 -540 {
lab=GND}
N 1030 -540 1030 -480 {
lab=GND}
N 1000 -480 1030 -480 {
lab=GND}
N 1170 -540 1270 -540 {
lab=A1}
N 1270 -540 1270 -500 {
lab=A1}
N 1270 -500 1290 -500 {
lab=A1}
N 1290 -540 1300 -540 {
lab=GND}
N 1300 -540 1300 -480 {
lab=GND}
N 1270 -480 1300 -480 {
lab=GND}
N 1450 -540 1550 -540 {
lab=A0}
N 1550 -540 1550 -500 {
lab=A0}
N 1550 -500 1570 -500 {
lab=A0}
N 1570 -540 1580 -540 {
lab=GND}
N 1580 -540 1580 -480 {
lab=GND}
N 1550 -480 1580 -480 {
lab=GND}
N 1740 -540 1840 -540 {
lab=A2}
N 1840 -540 1840 -500 {
lab=A2}
N 1840 -500 1860 -500 {
lab=A2}
N 1860 -540 1870 -540 {
lab=GND}
N 1870 -540 1870 -480 {
lab=GND}
N 1840 -480 1870 -480 {
lab=GND}
N 2010 -540 2110 -540 {
lab=A1}
N 2110 -540 2110 -500 {
lab=A1}
N 2110 -500 2130 -500 {
lab=A1}
N 2130 -540 2140 -540 {
lab=GND}
N 2140 -540 2140 -480 {
lab=GND}
N 2110 -480 2140 -480 {
lab=GND}
N 2290 -540 2390 -540 {
lab=A0}
N 2390 -540 2390 -500 {
lab=A0}
N 2390 -500 2410 -500 {
lab=A0}
N 2410 -540 2420 -540 {
lab=GND}
N 2420 -540 2420 -480 {
lab=GND}
N 2390 -480 2420 -480 {
lab=GND}
N 2580 -540 2680 -540 {
lab=A2}
N 2680 -540 2680 -500 {
lab=A2}
N 2680 -500 2700 -500 {
lab=A2}
N 2700 -540 2710 -540 {
lab=GND}
N 2710 -540 2710 -480 {
lab=GND}
N 2680 -480 2710 -480 {
lab=GND}
N 2850 -540 2950 -540 {
lab=A1}
N 2950 -540 2950 -500 {
lab=A1}
N 2950 -500 2970 -500 {
lab=A1}
N 2970 -540 2980 -540 {
lab=GND}
N 2980 -540 2980 -480 {
lab=GND}
N 2950 -480 2980 -480 {
lab=GND}
N 3130 -540 3230 -540 {
lab=A0}
N 3230 -540 3230 -500 {
lab=A0}
N 3230 -500 3250 -500 {
lab=A0}
N 3250 -540 3260 -540 {
lab=GND}
N 3260 -540 3260 -480 {
lab=GND}
N 3230 -480 3260 -480 {
lab=GND}
N 410 -890 430 -890 {
lab=x1p}
N 410 -810 430 -810 {
lab=x1n}
N 1210 -810 1230 -810 {
lab=x2n}
N 1210 -890 1230 -890 {
lab=x2p}
N 2050 -810 2070 -810 {
lab=x3n}
N 2050 -890 2070 -890 {
lab=x3p}
N 2050 -810 2070 -810 {
lab=x3n}
N 2050 -890 2070 -890 {
lab=x3p}
N 2890 -810 2910 -810 {
lab=x4n}
N 2890 -890 2910 -890 {
lab=x4p}
N 450 -730 450 -670 {
lab=x1p}
N 490 -730 490 -670 {
lab=x1n}
N 1250 -730 1250 -670 {
lab=x2p}
N 1290 -730 1290 -670 {
lab=x2n}
N 2090 -730 2090 -670 {
lab=x3p}
N 2130 -730 2130 -670 {
lab=x3n}
N 2930 -730 2930 -670 {
lab=x4p}
N 2970 -730 2970 -670 {
lab=x4n}
C {devices/vsource.sym} 640 -1050 0 0 {name=V2 value=0.25
}
C {devices/vcvs.sym} 710 -1280 0 0 {name=E1 value=-0.5}
C {devices/vcvs.sym} 570 -1280 0 1 {name=E2 value=0.5}
C {devices/vsource.sym} 840 -1210 0 0 {name=VIN value="0 AC 1"
}
C {devices/gnd.sym} 640 -990 0 0 {name=l1 lab=GND}
C {devices/lab_pin.sym} 550 -1330 0 0 {name=l2 sig_type=std_logic lab=vip}
C {devices/lab_pin.sym} 730 -1330 0 1 {name=l3 sig_type=std_logic lab=vin
}
C {devices/lab_pin.sym} 570 -1110 0 0 {name=l8 sig_type=std_logic lab=vcmi}
C {devices/launcher.sym} 200 -1020 0 0 {name=h1
descr="Annotate OP"
tclcommand="set show_hidden_texts 1; xschem annotate_op"}
C {sky130_fd_pr/corner.sym} 260 -1180 0 0 {name=CORNER only_toplevel=false corner=tt}
C {devices/lab_pin.sym} 640 -1300 1 0 {name=l4 sig_type=std_logic lab=vid}
C {devices/gnd.sym} 640 -1230 0 0 {name=l5 lab=GND}
C {devices/code.sym} 130 -1180 0 0 {name=STIMULI
only_toplevel=false
value="
** XSPICE Component Instances
a24 D0 CLK NULL NULL %d(Q0 NQ0) dff1
a25 D1 CLK NULL NULL %d(Q1 NQ1) dff1
a26 D2 CLK NULL NULL %d(Q2 NQ2) dff1
a27 NQ1 %d(B1) inv1
a28 [NQ1 Q0] temp1 and1
a29 [Q2 temp1] %d(B0) or1

** XSPICE Models
.model comp0 adc_bridge(in_low=-1e-15 in_high=0)
.model adc_buf adc_bridge(in_low=0.899 in_high=0.901)
.model dac1 dac_bridge(out_low = -1 out_high = 1 out_undef = -1 input_load = 5.0e-12 t_rise = 0.1e-9 t_fall = 0.1e-9)
.model dac2 dac_bridge(out_low = 0 out_high = 1 out_undef = -1 input_load = 0 t_rise = 0.50e-9 t_fall = 0.50e-9)
.model switch1 sw vt=0.9 vh=0.05 ron=0.1 roff=100Meg
.model inv1 d_inverter(rise_delay = 0.5e-9 fall_delay = 0.5e-9 input_load = 0.5e-12)
.model and1 d_and(rise_delay = 0.5e-9 fall_delay = 0.3e-9 input_load = 0.5e-12)
.model or1 d_or(rise_delay = 0.5e-9 fall_delay = 0.3e-9 input_load = 0.5e-12)
.model dff1 d_dff(clk_delay = 10.0e-9 set_delay = 10.0e-9 reset_delay = 10.0e-9 ic = 0 rise_delay = 10.0e-9 fall_delay = 10.0e-9)

** Transient Noise Source
VNoiw vin_n 0 DC 0 TRNOISE (0 1.5u 0 0)

** Save specific nodes
*.options savecurrents
.control
esave CLK B1 B0
*save vclk x1p x1n x2p x2n x3p x3n x4p x4n vip vin data1 data0 A0 A1 A2
*save x1p x1n x2p x2n x3p x3n x4p x4n vip vin

set notrnoise

let tstartup = 0

let f_res = 1/64
let f_sig = 18
let tper_sig = 1/f_sig
let tfr_sig = tper_sig/2

let vin_ampl = 0.01
let vin_dc = 0.25

alter @VIN[SIN] = [ 0 $&vin_ampl $&f_sig $&tstartup 0 0 ]
alter @VIN[DC] = 0.0
alter @VINDC[DC] = $&vin_dc

let fs = 65536
let fclk = fs
let tper_clk = 1/fclk
let tfr_clk = tper_clk/100
let ton_clk = tper_clk*5/10
alter @VCLK[PULSE]=[ 0 1.8 $&tstartup $&tfr_clk $&tfr_clk $&ton_clk $&tper_clk 0 ]

let N_per = f_sig/f_res
let N_per = 2
let tstep = 0.01/f_sig
let tstop = N_per/f_sig
let tstart = 0

** Main Simulations
let pltnr = 1

while const.pltnr le 1
	
	*dc VIN -0.81 0.81 0.008

	*ac dec 1000 0.1 1e7

	tran $&tstep $&tstop $&tstart uic

	
	*set pltName = "ac$&const.pltnr"
       	*setplot $pltName
	*setplot ac1
	*let A = v(vout)/v(vin)
	*plot vdb(A) 180/PI*cph(A)

	*set pltName = "dc$&const.pltnr"
       	*setplot $pltName
	*setplot dc1
	*let vid = v(vid)

	
	*let iop = v1#branch
	*let ion = v3#branch
	*let iod = iop-ion

	*plot iod ion iop

	setplot tran1

	eprvcd CLK B0 B1 > "/foss/designs/mod/ctdsm4_tran_out.vcd"

	*let x1d = v(x1p)-v(x1n)
	*let x2d = v(x2p)-v(x2n)
	*let x3d = v(x3p)-v(x3n)
	*let x4d = v(x4p)-v(x4n)
	*let vin = v(vip)-v(vin)

	*let x1cm = (v(x1p)+v(x1n))/2
	*let x2cm = (v(x2p)+v(x2n))/2
	*let x3cm = (v(x3p)+v(x3n))/2
	*let x4cm = (v(x4p)+v(x4n))/2
	
	*let i1op = vx1p#branch
	*let i1on = vx1n#branch	
	*let i2op = vx2p#branch
	*let i2on = vx2n#branch
	*let i3op = vx3p#branch
	*let i3on = vx3n#branch
	*let i4op = vx4p#branch
	*let i4on = vx4n#branch

	*let i1fbp = vfb1p#branch
	*let i1fbn = vfb1n#branch
	*let i2fbp = vfb2p#branch
	*let i2fbn = vfb2n#branch
	*let i3fbp = vfb3p#branch
	*let i3fbn = vfb3n#branch
	*let i4fbp = vfb4p#branch
	*let i4fbn = vfb4n#branch

	*let i1o = i1op - i1on
	*let i1fb = i1fbp - i1fbn
	*let i2o = i2op - i2on
	*let i2fb = i2fbp - i2fbn
	*let i3o = i3op - i3on
	*let i3fb = i3fbp - i3fbn
	*let i4o = i4op - i4on
	*let i4fb = i4fbp - i4fbn

	*plot vin x1d x2d x3d x4d
	*plot x1cm x2cm x3cm x4cm
	*plot A0 A1 A2
	*plot i1op i1on i1fbp i1fbn
	*plot i2op i2on i2fbp i2fbn
	*plot i3op i3on i3fbp i3fbn
	*plot i4op i4on i4fbp i4fbn
	*plot i1o i1fb
	*plot i2o i2fb
	*plot i3o i3fb
	*plot i4o i4fb
	*plot i2op i2on
	*plot i3op i3on
	*plot i4op i4on

	*plot vin
	

       	let const.pltnr = const.pltnr + 1
end

.endc"}
C {devices/vsource.sym} 1270 -1220 0 0 {name=V1 value=0.9
}
C {devices/gnd.sym} 1270 -1160 0 0 {name=l9 lab=GND}
C {devices/lab_pin.sym} 1270 -1270 0 0 {name=l14 sig_type=std_logic lab=vcm}
C {devices/adc_bridge.sym} 1780 -1330 0 0 {name=A1 adc_bridge_model= comp0}
C {devices/vcvs.sym} 1730 -1280 0 0 {name=E3 value=1}
C {devices/lab_pin.sym} 2770 -1330 3 1 {name=p3 sig_type=std_logic lab=D0}
C {devices/lab_pin.sym} 2300 -1330 3 1 {name=p1 sig_type=std_logic lab=D1}
C {devices/vcvs.sym} 1730 -1180 0 0 {name=E4 value=1}
C {devices/adc_bridge.sym} 2240 -1330 0 0 {name=A2 adc_bridge_model= comp0}
C {devices/vcvs.sym} 2190 -1280 0 0 {name=E5 value=1}
C {devices/vcvs.sym} 2190 -1180 0 0 {name=E6 value=1}
C {devices/lab_pin.sym} 1840 -1330 3 1 {name=p4 sig_type=std_logic lab=D2}
C {devices/adc_bridge.sym} 2710 -1330 0 0 {name=A3 adc_bridge_model= comp0}
C {devices/vcvs.sym} 2660 -1280 0 0 {name=E7 value=1}
C {devices/vcvs.sym} 2660 -1180 0 0 {name=E8 value=1}
C {devices/gnd.sym} 1730 -1110 0 0 {name=l50 lab=GND}
C {devices/lab_pin.sym} 1650 -1160 0 0 {name=l51 sig_type=std_logic lab=vref_p
}
C {devices/gnd.sym} 2190 -1110 0 0 {name=l55 lab=GND}
C {devices/gnd.sym} 2660 -1110 0 0 {name=l56 lab=GND}
C {devices/lab_pin.sym} 2580 -1200 0 0 {name=l57 sig_type=std_logic lab=vref_p
}
C {devices/dac_bridge.sym} 1970 -1330 0 0 {name=A5 dac_bridge_model= dac1}
C {devices/dac_bridge.sym} 2430 -1330 0 0 {name=A6 dac_bridge_model= dac1}
C {devices/dac_bridge.sym} 2900 -1330 0 0 {name=A7 dac_bridge_model= dac1}
C {devices/vccs.sym} 140 -520 0 0 {name=G17 value=1.2u}
C {devices/gnd.sym} 80 -480 0 0 {name=l58 lab=GND}
C {devices/vccs.sym} 260 -520 2 1 {name=G18 value=1.2u}
C {devices/gnd.sym} 200 -480 0 0 {name=l60 lab=GND}
C {devices/vccs.sym} 410 -520 0 0 {name=G22 value=1.2u}
C {devices/gnd.sym} 350 -480 0 0 {name=l62 lab=GND}
C {devices/gnd.sym} 470 -480 0 0 {name=l64 lab=GND}
C {devices/vccs.sym} 690 -520 0 0 {name=G24 value=1.2u}
C {devices/gnd.sym} 630 -480 0 0 {name=l66 lab=GND}
C {devices/lab_pin.sym} 140 -440 3 0 {name=l67 sig_type=std_logic lab=vcm}
C {devices/gnd.sym} 750 -480 0 0 {name=l68 lab=GND}
C {devices/lab_pin.sym} 80 -540 1 0 {name=p2 sig_type=std_logic lab=A2}
C {devices/lab_pin.sym} 350 -540 1 0 {name=p8 sig_type=std_logic lab=A1}
C {devices/lab_pin.sym} 630 -540 1 0 {name=p12 sig_type=std_logic lab=A0
}
C {devices/lab_pin.sym} 2040 -1330 1 0 {name=p13 sig_type=std_logic lab=A2}
C {devices/lab_pin.sym} 2500 -1330 1 0 {name=p14 sig_type=std_logic lab=A1}
C {devices/lab_pin.sym} 2970 -1330 1 0 {name=p15 sig_type=std_logic lab=A0
}
C {devices/vsource.sym} 1040 -1210 0 0 {name=VCLK value="0"
}
C {devices/lab_pin.sym} 1040 -1270 1 0 {name=p16 sig_type=std_logic lab=vclk}
C {devices/gnd.sym} 1040 -1150 0 0 {name=l19 lab=GND}
C {devices/adc_bridge.sym} 1090 -1260 0 0 {name=A4 adc_bridge_model= adc_buf}
C {devices/lab_pin.sym} 1140 -1260 0 1 {name=p17 sig_type=std_logic lab=CLK}
C {devices/vsource.sym} 1360 -1220 0 0 {name=V4 value="0.18"
}
C {devices/lab_pin.sym} 1360 -1280 1 0 {name=l24 sig_type=std_logic lab=vref_p
}
C {devices/lab_pin.sym} 1360 -1170 3 0 {name=l70 sig_type=std_logic lab=vcm}
C {devices/lab_pin.sym} 2580 -1160 0 0 {name=l32 sig_type=std_logic lab=vcm}
C {devices/lab_pin.sym} 2110 -1180 0 0 {name=l13 sig_type=std_logic lab=vcm}
C {devices/lab_pin.sym} 1650 -1200 0 0 {name=l15 sig_type=std_logic lab=vcm}
C {devices/vsource.sym} 570 -1190 0 0 {name=VINDC value=0.25
}
C {devices/vccs.sym} 940 -520 0 0 {name=G23 value=24n}
C {devices/gnd.sym} 880 -480 0 0 {name=l30 lab=GND}
C {devices/gnd.sym} 1000 -480 0 0 {name=l31 lab=GND}
C {devices/vccs.sym} 1210 -520 0 0 {name=G1 value=24n}
C {devices/gnd.sym} 1150 -480 0 0 {name=l36 lab=GND}
C {devices/gnd.sym} 1270 -480 0 0 {name=l37 lab=GND}
C {devices/vccs.sym} 1490 -520 0 0 {name=G2 value=24n}
C {devices/gnd.sym} 1430 -480 0 0 {name=l47 lab=GND}
C {devices/lab_pin.sym} 940 -440 3 0 {name=l27 sig_type=std_logic lab=vcm}
C {devices/gnd.sym} 1550 -480 0 0 {name=l53 lab=GND}
C {devices/lab_pin.sym} 880 -540 1 0 {name=p5 sig_type=std_logic lab=A2}
C {devices/lab_pin.sym} 1150 -540 1 0 {name=p6 sig_type=std_logic lab=A1}
C {devices/lab_pin.sym} 1430 -540 1 0 {name=p7 sig_type=std_logic lab=A0
}
C {devices/vccs.sym} 1780 -520 0 0 {name=G29 value=7.4n}
C {devices/gnd.sym} 1720 -480 0 0 {name=l54 lab=GND}
C {devices/gnd.sym} 1840 -480 0 0 {name=l59 lab=GND}
C {devices/vccs.sym} 2050 -520 0 0 {name=G5 value=7.4n}
C {devices/gnd.sym} 1990 -480 0 0 {name=l61 lab=GND}
C {devices/gnd.sym} 2110 -480 0 0 {name=l63 lab=GND}
C {devices/vccs.sym} 2330 -520 0 0 {name=G6 value=7.4n}
C {devices/gnd.sym} 2270 -480 0 0 {name=l65 lab=GND}
C {devices/lab_pin.sym} 1780 -440 3 0 {name=l28 sig_type=std_logic lab=vcm}
C {devices/gnd.sym} 2390 -480 0 0 {name=l71 lab=GND}
C {devices/lab_pin.sym} 1720 -540 1 0 {name=p9 sig_type=std_logic lab=A2}
C {devices/lab_pin.sym} 1990 -540 1 0 {name=p10 sig_type=std_logic lab=A1}
C {devices/lab_pin.sym} 2270 -540 1 0 {name=p11 sig_type=std_logic lab=A0
}
C {devices/vccs.sym} 2620 -520 0 0 {name=G35 value=3.5n}
C {devices/gnd.sym} 2560 -480 0 0 {name=l72 lab=GND}
C {devices/gnd.sym} 2680 -480 0 0 {name=l73 lab=GND}
C {devices/vccs.sym} 2890 -520 0 0 {name=G9 value=3.5n}
C {devices/gnd.sym} 2830 -480 0 0 {name=l74 lab=GND}
C {devices/gnd.sym} 2950 -480 0 0 {name=l75 lab=GND}
C {devices/vccs.sym} 3170 -520 0 0 {name=G10 value=3.5n}
C {devices/gnd.sym} 3110 -480 0 0 {name=l76 lab=GND}
C {devices/lab_pin.sym} 2620 -440 3 0 {name=l29 sig_type=std_logic lab=vcm}
C {devices/gnd.sym} 3230 -480 0 0 {name=l78 lab=GND}
C {devices/lab_pin.sym} 2560 -540 1 0 {name=p18 sig_type=std_logic lab=A2}
C {devices/lab_pin.sym} 2830 -540 1 0 {name=p19 sig_type=std_logic lab=A1}
C {devices/lab_pin.sym} 3110 -540 1 0 {name=p20 sig_type=std_logic lab=A0
}
C {devices/lab_pin.sym} 2110 -1260 2 1 {name=l45 sig_type=std_logic lab=x4n
}
C {devices/lab_pin.sym} 2110 -1300 0 0 {name=l46 sig_type=std_logic lab=x4p
}
C {devices/lab_pin.sym} 1650 -1260 2 1 {name=l43 sig_type=std_logic lab=x4n
}
C {devices/lab_pin.sym} 1650 -1300 0 0 {name=l44 sig_type=std_logic lab=x4p
}
C {devices/lab_pin.sym} 2580 -1260 2 1 {name=l48 sig_type=std_logic lab=x4n
}
C {devices/lab_pin.sym} 2580 -1300 0 0 {name=l49 sig_type=std_logic lab=x4p
}
C {devices/lab_pin.sym} 220 -810 0 0 {name=l7 sig_type=std_logic lab=vip}
C {devices/lab_pin.sym} 220 -890 0 0 {name=l10 sig_type=std_logic lab=vin
}
C {devices/lab_pin.sym} 510 -810 3 0 {name=l12 sig_type=std_logic lab=x1n
}
C {devices/capa.sym} 540 -850 0 0 {name=C2
m=1
value=800p
footprint=1206
device="ceramic capacitor"}
C {devices/lab_pin.sym} 510 -890 1 0 {name=l11 sig_type=std_logic lab=x1p
}
C {/foss/designs/macro-models/ota_fd_2pole.sym} 310 -950 0 0 {name=x1 GM=20u RO=100Meg CO=0 RP=0 CP=0 VCMO=0.9 I0=100u}
C {devices/lab_pin.sym} 1310 -810 3 0 {name=l6 sig_type=std_logic lab=x2n
}
C {devices/capa.sym} 1340 -850 0 0 {name=C1
m=1
value=5p
footprint=1206
device="ceramic capacitor"}
C {devices/lab_pin.sym} 1310 -890 1 0 {name=l16 sig_type=std_logic lab=x2p
}
C {/foss/designs/macro-models/ota_fd_2pole.sym} 1110 -950 0 0 {name=x2 GM=230n RO=100G CO=0 RP=0 CP=0 VCMO=0.9 I0=100u}
C {devices/lab_pin.sym} 1090 -850 0 0 {name=l17 sig_type=std_logic lab=vcm}
C {devices/lab_pin.sym} 2150 -810 3 0 {name=l18 sig_type=std_logic lab=x3n
}
C {devices/capa.sym} 2180 -850 0 0 {name=C7
m=1
value=1p
footprint=1206
device="ceramic capacitor"}
C {devices/lab_pin.sym} 2150 -890 1 0 {name=l20 sig_type=std_logic lab=x3p
}
C {/foss/designs/macro-models/ota_fd_2pole.sym} 1950 -950 0 0 {name=x3 GM=46n RO=100G CO=0 RP=0 CP=0 VCMO=0.9 I0=100u}
C {devices/lab_pin.sym} 1930 -850 0 0 {name=l21 sig_type=std_logic lab=vcm}
C {devices/lab_pin.sym} 2990 -810 3 0 {name=l23 sig_type=std_logic lab=x4n
}
C {devices/capa.sym} 3020 -850 0 0 {name=C8
m=1
value=0.65p
footprint=1206
device="ceramic capacitor"}
C {devices/lab_pin.sym} 2990 -890 1 0 {name=l25 sig_type=std_logic lab=x4p
}
C {/foss/designs/macro-models/ota_fd_2pole.sym} 2790 -950 0 0 {name=x4 GM=23n RO=100G CO=0 RP=0 CP=0 VCMO=0.9 I0=100u}
C {devices/lab_pin.sym} 2770 -850 0 0 {name=l22 sig_type=std_logic lab=vcm}
C {devices/lab_pin.sym} 220 -850 0 0 {name=l26 sig_type=std_logic lab=vcmi}
C {devices/lab_pin.sym} 1900 -1330 1 0 {name=p21 sig_type=std_logic lab=Q2}
C {devices/lab_pin.sym} 2360 -1330 1 0 {name=p22 sig_type=std_logic lab=Q1}
C {devices/lab_pin.sym} 2830 -1330 1 0 {name=p23 sig_type=std_logic lab=Q0}
C {devices/vcvs.sym} 960 -1250 0 0 {name=E9 value=1}
C {devices/lab_pin.sym} 960 -1300 1 0 {name=l33 sig_type=std_logic lab=vid}
C {devices/gnd.sym} 960 -1200 0 0 {name=l34 lab=GND}
C {devices/lab_pin.sym} 840 -1150 3 0 {name=p24 sig_type=std_logic lab=vin_n}
C {devices/lab_pin.sym} 840 -1290 1 0 {name=p25 sig_type=std_logic lab=vin_p}
C {devices/vccs.sym} 530 -520 2 1 {name=G25 value=1.2u}
C {devices/vccs.sym} 810 -520 2 1 {name=G26 value=1.2u}
C {devices/vccs.sym} 1060 -520 2 1 {name=G3 value=24n}
C {devices/vccs.sym} 1330 -520 2 1 {name=G4 value=24n}
C {devices/vccs.sym} 1610 -520 2 1 {name=G11 value=24n}
C {devices/vccs.sym} 1900 -520 2 1 {name=G7 value=7.4n}
C {devices/vccs.sym} 2170 -520 2 1 {name=G8 value=7.4n}
C {devices/vccs.sym} 2450 -520 2 1 {name=G16 value=7.4n}
C {devices/vccs.sym} 2740 -520 2 1 {name=G12 value=3.5n}
C {devices/vccs.sym} 3010 -520 2 1 {name=G15 value=3.5n}
C {devices/vccs.sym} 3290 -520 2 1 {name=G21 value=3.5n}
C {devices/title.sym} 200 -140 0 0 {name=l35 author="Michael Koefinger"}
